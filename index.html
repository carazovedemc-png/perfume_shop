<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Aura Atelier - эксклюзивные духи</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="https://img.icons8.com/color/96/000000/perfume-bottle.png">
    <style>
        /* Анимации для градиентов */
        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }
        
        /* Скрываем старое описание */
        .company-description {
            display: none !important;
        }
    </style>
</head>
<body>
    <!-- Верхняя панель (исправлена для Android) -->
    <header class="top-header">
        <div class="container">
            <div class="header-top-row">
                <!-- Логотип - всегда виден на Android -->
                <div class="logo android-fix-logo">
                    <div class="logo-icon-wrapper">
                        <i class="fas fa-sparkles logo-icon"></i>
                    </div>
                    <div class="logo-text">
                        <span class="logo-main">Aura Atelier</span>
                        <span class="logo-sub">эксклюзивные духи</span>
                    </div>
                </div>
                
                <!-- Поиск - занимает всё доступное пространство -->
                <div class="search-container">
                    <div class="search-box">
                        <input type="text" id="searchInput" placeholder="Поиск духов...">
                        <button class="search-btn-glass" id="searchBtn">
                            <div class="search-glass-circle">
                                <i class="fas fa-search"></i>
                            </div>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Баннер с переключением -->
    <div class="container">
        <div class="banner-container">
            <!-- Баннер 1: Эксклюзивные ароматы -->
            <div class="banner-slide exclusive active" id="banner1">
                <div class="banner-content">
                    <h1>Эксклюзивные ароматы</h1>
                    <p>Только оригинальная парфюмерия с гарантией качества</p>
                </div>
            </div>
            
            <!-- Баннер 2: Контакты для заказов -->
            <div class="banner-slide contacts" id="banner2">
                <div class="banner-content">
                    <h1>Заказы оформляем в лс</h1>
                    <div class="banner-contacts">
                        <strong>@Ayder505</strong><br>
                        <strong>@Ma1traher</strong><br>
                        Telegram channel:<br>
                        <a href="https://t.me/Aa_Atelier" target="_blank">https://t.me/Aa_Atelier</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Основной контент -->
    <main class="container main-container">
        <section class="main-content">
            <div class="products-header">
                <h2 id="categoryTitle">Рекомендации</h2>
                <div class="sort-select-glass">
                    <select id="sortBy">
                        <option value="popular">По популярности</option>
                        <option value="new">Сначала новинки</option>
                        <option value="price-low">Цена: по возрастанию</option>
                        <option value="price-high">Цена: по убыванию</option>
                        <option value="rating">По рейтингу</option>
                    </select>
                    <i class="fas fa-chevron-down"></i>
                </div>
            </div>

        <!-- Карточки товаров -->
        <div class="products-grid" id="productsGrid">
            <!-- Товары загружаются через JS -->
        </div>
        
        <!-- Пагинация -->
        <div class="pagination">
            <button class="page-btn prev" id="prevPage" disabled>
                <i class="fas fa-chevron-left"></i>
            </button>
            <div class="page-numbers" id="pageNumbers">
                <button class="page-btn active" data-page="1">1</button>
                <button class="page-btn" data-page="2">2</button>
                <button class="page-btn" data-page="3">3</button>
            </div>
            <button class="page-btn next" id="nextPage">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
    </section>
</main>

<!-- Нижняя панель (исправлена для Android) -->
<nav class="bottom-nav-glass android-fix-button-container">
    <div class="nav-inner">
        <button class="nav-btn" id="navFavorites">
            <i class="far fa-heart"></i>
            <span>Избранное</span>
        </button>
        <div class="nav-divider android-fix-divider"></div>
        
        <button class="nav-btn" id="navCart">
            <i class="fas fa-shopping-cart"></i>
            <span>Корзина</span>
            <span class="nav-badge" id="bottomCartCount">0</span>
        </button>
        <div class="nav-divider android-fix-divider"></div>
        
        <button class="nav-btn" id="navFilter">
            <i class="fas fa-filter"></i>
            <span>Фильтр</span>
        </button>
        <div class="nav-divider android-fix-divider"></div>
        
        <a href="https://t.me/Ayder505" target="_blank" class="nav-btn" id="navContact">
            <i class="fab fa-telegram"></i>
            <span>Связь</span>
        </a>
    </div>
</nav>

<!-- Попап корзины -->
<div class="cart-popup glass-popup" id="cartPopup">
    <div class="popup-header">
        <h3>Корзина</h3>
        <button class="close-popup" id="closeCart">
            <i class="fas fa-times"></i>
        </button>
    </div>
    <div class="popup-body">
        <div class="cart-items" id="cartItems">
            <!-- Товары в корзине -->
        </div>
        <div class="cart-summary">
            <div class="summary-row">
                <span>Товары</span>
                <span id="cartTotal">0 ₽</span>
            </div>
            <div class="summary-row total">
                <span>Итого</span>
                <span id="cartFinal">0 ₽</span>
            </div>
            <button class="btn-checkout-glass" id="checkoutBtn">
                <i class="fas fa-paper-plane"></i>
                Оформить заказ
            </button>
        </div>
    </div>
</div>

<!-- Попап избранного -->
<div class="favorites-popup glass-popup" id="favoritesPopup">
    <div class="popup-header">
        <h3>Избранное</h3>
        <button class="close-popup" id="closeFav">
            <i class="fas fa-times"></i>
        </button>
    </div>
    <div class="popup-body">
        <div class="fav-items" id="favoritesItems">
            <!-- Товары в избранном -->
        </div>
        <div class="fav-empty" id="favEmpty">
            <i class="far fa-heart"></i>
            <p>В избранном пока ничего нет</p>
            <button class="btn-browse-glass" id="browseBtn">
                <i class="fas fa-store"></i>
                Перейти в каталог
            </button>
        </div>
    </div>
</div>

<!-- Попап фильтров (компактный для Android) -->
<div class="filter-popup glass-popup" id="filterPopup">
    <div class="popup-header">
        <h3>Фильтры</h3>
        <button class="close-popup" id="closeFilter">
            <i class="fas fa-times"></i>
        </button>
    </div>
    <div class="popup-body">
        <div class="filter-content">
            <div class="filter-group">
                <h4>Категории</h4>
                <div class="checkbox-group">
                    <label class="checkbox">
                        <input type="checkbox" class="filter-category" value="arabian" checked>
                        <span class="checkmark"></span>
                        Арабские духи
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" class="filter-category" value="premium" checked>
                        <span class="checkmark"></span>
                        Премиум
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" class="filter-category" value="affordable" checked>
                        <span class="checkmark"></span>
                        Доступные
                    </label>
                </div>
            </div>
            
            <div class="filter-group">
                <h4>Цена, ₽</h4>
                <div class="price-range">
                    <div class="range-inputs">
                        <input type="number" id="filterPriceMin" placeholder="0" min="0">
                        <span class="range-divider">-</span>
                        <input type="number" id="filterPriceMax" placeholder="50000" min="0">
                    </div>
                    <div class="range-slider">
                        <input type="range" id="filterPriceRange" min="0" max="50000" value="25000">
                    </div>
                </div>
            </div>
            
            <div class="filter-group">
                <h4>Объем, мл</h4>
                <div class="checkbox-group">
                    <label class="checkbox">
                        <input type="checkbox" class="filter-volume" value="30">
                        <span class="checkmark"></span>
                        30 мл
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" class="filter-volume" value="50">
                        <span class="checkmark"></span>
                        50 мл
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" class="filter-volume" value="100">
                        <span class="checkmark"></span>
                        100 мл
                    </label>
                    <label class="checkbox">
                        <input type="checkbox" class="filter-volume" value="200">
                        <span class="checkmark"></span>
                        200 мл
                    </label>
                </div>
            </div>
            
            <div class="filter-group">
                <h4>Рейтинг</h4>
                <div class="rating-filter">
                    <label class="star-rating">
                        <input type="radio" name="filterRating" value="0" checked>
                        <span class="stars">
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                        </span>
                        <span class="rating-text">Любой</span>
                    </label>
                    <label class="star-rating">
                        <input type="radio" name="filterRating" value="3">
                        <span class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                            <i class="far fa-star"></i>
                        </span>
                        <span class="rating-text">3 и выше</span>
                    </label>
                    <label class="star-rating">
                        <input type="radio" name="filterRating" value="4">
                        <span class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="far fa-star"></i>
                        </span>
                        <span class="rating-text">4 и выше</span>
                    </label>
                    <label class="star-rating">
                        <input type="radio" name="filterRating" value="4.5">
                        <span class="stars">
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star"></i>
                            <i class="fas fa-star-half-alt"></i>
                        </span>
                        <span class="rating-text">4.5 и выше</span>
                    </label>
                </div>
            </div>
            
            <div class="filter-buttons">
                <button class="btn-filter-apply" id="applyFilterBtn">
                    <i class="fas fa-check"></i> Применить
                </button>
                <button class="btn-filter-reset" id="resetFilterBtn">
                    <i class="fas fa-redo"></i> Сбросить
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Модальное окно товара -->
<div class="product-modal" id="productModal">
    <div class="modal-content glass-popup">
        <button class="modal-close" id="closeModal">
            <i class="fas fa-times"></i>
        </button>
        <div class="modal-body" id="modalBody">
            <!-- Контент загружается динамически -->
        </div>
    </div>
</div>

<!-- Оверлей для попапов -->
<div class="overlay" id="overlay"></div>

    <script src="script.js"></script>
    <script>
        // Скрипт для переключения баннеров
        document.addEventListener('DOMContentLoaded', function() {
            const banner1 = document.getElementById('banner1');
            const banner2 = document.getElementById('banner2');
            let currentBanner = 1;
            
            // Функция переключения баннеров
            function switchBanner() {
                if (currentBanner === 1) {
                    banner1.classList.remove('active');
                    banner2.classList.add('active');
                    currentBanner = 2;
                } else {
                    banner2.classList.remove('active');
                    banner1.classList.add('active');
                    currentBanner = 1;
                }
            }
            
            // Переключаем баннеры каждые 10 секунд
            setInterval(switchBanner, 10000);
            
            // Инициализация фильтров (компактный вид для Android)
            function initFilterPopup() {
                const priceRange = document.getElementById('filterPriceRange');
                const priceMinInput = document.getElementById('filterPriceMin');
                const priceMaxInput = document.getElementById('filterPriceMax');
                
                if (priceRange && priceMinInput && priceMaxInput) {
                    // Устанавливаем начальные значения
                    priceMinInput.value = '0';
                    priceMaxInput.value = '50000';
                    
                    priceRange.addEventListener('input', function() {
                        const value = parseInt(this.value);
                        priceMinInput.value = Math.max(0, value - 10000);
                        priceMaxInput.value = Math.min(50000, value + 10000);
                    });
                }
                
                // Кнопки фильтров
                document.getElementById('applyFilterBtn')?.addEventListener('click', function() {
                    if (window.app && window.app.filterProducts) {
                        window.app.filterProducts();
                    }
                    closeFilterPopup();
                });
                
                document.getElementById('resetFilterBtn')?.addEventListener('click', function() {
                    if (window.app && window.app.resetFilters) {
                        window.app.resetFilters();
                    }
                });
            }
            
            // Функции для открытия/закрытия попапов
            function openFilterPopup() {
                document.getElementById('filterPopup').classList.add('show');
                document.getElementById('overlay').classList.add('show');
                document.body.style.overflow = 'hidden';
            }
            
            function closeFilterPopup() {
                document.getElementById('filterPopup').classList.remove('show');
                document.getElementById('overlay').classList.remove('show');
                document.body.style.overflow = 'auto';
            }
            
            // Назначаем обработчики для нижнего меню
            document.getElementById('navFilter')?.addEventListener('click', openFilterPopup);
            document.getElementById('closeFilter')?.addEventListener('click', closeFilterPopup);
            
            // Инициализация
            initFilterPopup();
            
            // Проверка на Android устройство
            function isAndroid() {
                return /Android/i.test(navigator.userAgent);
            }
            
            // Применяем дополнительные фиксы для Android
            if (isAndroid()) {
                console.log('Android устройство обнаружено, применяем фиксы');
                
                // Гарантируем что логотип виден
                const logoText = document.querySelector('.logo-text');
                if (logoText) {
                    logoText.style.display = 'flex';
                    logoText.style.visibility = 'visible';
                    logoText.style.opacity = '1';
                }
                
                // Гарантируем что перегородки видны
                const dividers = document.querySelectorAll('.nav-divider');
                dividers.forEach(divider => {
                    divider.style.display = 'block';
                    divider.style.visibility = 'visible';
                    divider.style.opacity = '1';
                });
                
                // Фикс для поиска - правильное позиционирование
                const searchContainer = document.querySelector('.search-container');
                if (searchContainer) {
                    searchContainer.style.marginLeft = 'auto';
                    searchContainer.style.marginRight = '16px';
                }
            }
        });
    </script>
</body>
</html>